From bd01693da3eecb86959f010b52e1c282db326355 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Micha=C5=82=20Gapi=C5=84ski?= <mike@gapinski.eu>
Date: Sun, 2 Jun 2024 16:39:45 +0000
Subject: [PATCH 5/5] Fix crash when changing tether params
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Change-Id: I93e80667fe56ae64f01a8263790c611f9ee7ce73
Signed-off-by: Michał Gapiński <mike@gapinski.eu>
---
 src/com/android/settings/wifi/tether/WifiTetherSettings.java | 5 -----
 1 file changed, 5 deletions(-)

diff --git a/src/com/android/settings/wifi/tether/WifiTetherSettings.java b/src/com/android/settings/wifi/tether/WifiTetherSettings.java
index dc7a30b..a71a4dc 100644
--- a/src/com/android/settings/wifi/tether/WifiTetherSettings.java
+++ b/src/com/android/settings/wifi/tether/WifiTetherSettings.java
@@ -82,8 +82,6 @@ public class WifiTetherSettings extends RestrictedDashboardFragment
     WifiTetherPasswordPreferenceController mPasswordPreferenceController;
     @VisibleForTesting
     WifiTetherSecurityPreferenceController mSecurityPreferenceController;
-    @VisibleForTesting
-    WifiTetherAutoOffPreferenceController mWifiTetherAutoOffPreferenceController;
 
     @VisibleForTesting
     boolean mUnavailable;
@@ -190,7 +188,6 @@ public class WifiTetherSettings extends RestrictedDashboardFragment
         mSSIDPreferenceController = use(WifiTetherSSIDPreferenceController.class);
         mSecurityPreferenceController = use(WifiTetherSecurityPreferenceController.class);
         mPasswordPreferenceController = use(WifiTetherPasswordPreferenceController.class);
-        mWifiTetherAutoOffPreferenceController = use(WifiTetherAutoOffPreferenceController.class);
     }
 
     @Override
@@ -315,8 +312,6 @@ public class WifiTetherSettings extends RestrictedDashboardFragment
         configBuilder.setPassphrase(passphrase, securityType);
         if (!mWifiTetherViewModel.isSpeedFeatureAvailable()) {
         }
-        configBuilder.setAutoShutdownEnabled(
-                mWifiTetherAutoOffPreferenceController.isEnabled());
         return configBuilder.build();
     }
 
-- 
2.34.1

