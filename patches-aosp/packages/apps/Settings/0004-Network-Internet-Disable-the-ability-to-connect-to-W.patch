From e53422da6bd4564485694531bb165c406c3a498e Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Micha=C5=82=20Gapin=CC=81ski?= <mike@gapinski.eu>
Date: Mon, 4 Jul 2022 05:43:24 +0200
Subject: [PATCH 4/5] Network & Internet: Disable the ability to connect to
 Wi-Fi networks. It's a clear conflict with always on Hostspot
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Change-Id: I37cfa88c598762684cae5848cfb11f1aa5e9a106
Signed-off-by: Michał Gapiński <mike@gapinski.eu>
---
 res/xml/network_provider_internet.xml                 | 11 -----------
 .../settings/network/NetworkDashboardFragment.java    |  7 -------
 2 files changed, 18 deletions(-)

diff --git a/res/xml/network_provider_internet.xml b/res/xml/network_provider_internet.xml
index 2a08aae..330d386 100644
--- a/res/xml/network_provider_internet.xml
+++ b/res/xml/network_provider_internet.xml
@@ -20,17 +20,6 @@
     android:key="network_provider_and_internet_screen"
     android:title="@string/network_dashboard_title">
 
-    <com.android.settingslib.RestrictedPreference
-        android:fragment="com.android.settings.network.NetworkProviderSettings"
-        android:key="internet_settings"
-        android:title="@string/provider_internet_settings"
-        android:summary="@string/summary_placeholder"
-        android:icon="@drawable/ic_settings_wireless"
-        android:order="-30"
-        settings:allowDividerAbove="true"
-        settings:keywords="@string/keywords_internet"
-        settings:useAdminDisabledSummary="true" />
-
     <com.android.settingslib.RestrictedPreference
         android:key="calls_and_sms"
         android:title="@string/calls_and_sms"
diff --git a/src/com/android/settings/network/NetworkDashboardFragment.java b/src/com/android/settings/network/NetworkDashboardFragment.java
index 3bc5358..eef290a 100644
--- a/src/com/android/settings/network/NetworkDashboardFragment.java
+++ b/src/com/android/settings/network/NetworkDashboardFragment.java
@@ -91,13 +91,6 @@ public class NetworkDashboardFragment extends DashboardFragment implements
         controllers.add(new MobileNetworkSummaryController(context, lifecycle, lifecycleOwner));
         controllers.add(vpnPreferenceController);
 
-        if (Flags.internetPreferenceControllerV2()) {
-            controllers.add(
-                    new InternetPreferenceControllerV2(context, InternetPreferenceController.KEY));
-        } else {
-            controllers.add(new InternetPreferenceController(context, lifecycle, lifecycleOwner));
-        }
-
         controllers.add(privateDnsPreferenceController);
 
         // Start SettingsDumpService after the MobileNetworkRepository is created.
-- 
2.34.1

